generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model AccountCompany {
  id Int @id @default(autoincrement())
  email String @unique
  password String
  createdAt DateTime @default(now())
  projects  Project[]
  guests Guest[]  
  comments  Comment[]
}

model Project {
  id Int @id @default(autoincrement())
  name String
  description String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  accountId   Int       // Define a foreign key referencing AccountCompany
  account     AccountCompany @relation(fields: [accountId], references: [id])

  resources Resource[]
  Damages DamageImage[]

}

model Guest {
  id Int @id @default(autoincrement())
  email String @unique
  password String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  accountId   Int
  account     AccountCompany @relation(fields: [accountId], references: [id])
  comments  Comment[]
  
}

model Resource {
  id Int @id @default(autoincrement())
  type String
  path String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  projectId   Int
  project     Project @relation(fields: [projectId], references: [id])
}
model Comment {
  id            Int         @id @default(autoincrement())
  description   String
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  DamageImageId Int?
  DamageImage   DamageImage? @relation(fields: [DamageImageId], references: [id])
  AccountCompanyId Int?
  AccountCompany   AccountCompany? @relation(fields: [AccountCompanyId], references: [id])
  GuestId Int?
  Guest   Guest? @relation(fields: [GuestId], references: [id])
}

model DamageImage {
  id                     Int        @id @default(autoincrement())
  type                   String
  dangerDegree           Int?
  description            String?
  position               String?
  videoFrameNumber       Int
  damageImagename        String?
  damageImageCroppedname String?
  imagesPath             String?
  modelPrediction        Int?
  DomageIdModel          Int?
  DamageClassIdModel     Int?
  detectionTimestampVideo DateTime?
  ProjectId              Int
  Comments               Comment[] 
  Project                Project    @relation(fields: [ProjectId], references: [id])
}